var nts=window.nts||{model:{},view:{},controller:{},helper:{}};nts.model.BaseDao=function(){},nts.model.BaseDao.prototype={request:function(a){return $.ajax({type:"GET",url:a,dataType:"json",async:!1}).done($.proxy(this._successHandler,this)).fail(this._failureHandler)},_successHandler:function(a){return a},_failureHandler:function(a){return a?(window.alert("에러가 발생했습니다."),!1):void 0}},nts.model.AutoScrollDao=function(a){nts.model.BaseDao.call(this),this._model=a},nts.model.AutoScrollDao.prototype=Object.create(nts.model.BaseDao.prototype),nts.model.AutoScrollDao.prototype.constructor=nts.model.AutoScrollDao,nts.model.AutoScrollDao.prototype.findAll=function(){var a=this,b="src/json/data.json";a.request(b).then(function(b){a._model.localData=b})},nts.model.BaseEntity=function(){this._data=[]},nts.model.BaseEntity.prototype={get localData(){return this._data},set localData(a){this._data=a,this.dispatchEvent&&this.dispatchEvent("update")}},nts.model.AutoScrollEntity=function(){nts.model.BaseEntity.call(this),this._observer=new nts.helper.Observer},nts.model.AutoScrollEntity.prototype=Object.create(nts.model.BaseEntity.prototype),nts.model.AutoScrollEntity.prototype.constructor=nts.model.AutoScrollEntity,nts.model.AutoScrollEntity.prototype.addEventListener=function(a,b){this._observer.subscribe(a,b)},nts.model.AutoScrollEntity.prototype.dispatchEvent=function(a){this._observer.publish(a)},nts.controller.AutoScrollController=function(a,b){this._model=a,this._view=b,this._dao=new nts.model.AutoScrollDao(this._model),this._bindViewEvents(),this._bindModelEvents(),this._dao.findAll()},nts.controller.AutoScrollController.prototype={_bindViewEvents:function(){this._view._getMore.on("click",this._onClickChange.bind(this))},_bindModelEvents:function(){this._model.addEventListener("update",this._onUpdateModel.bind(this))},_onClickChange:function(){this._onUpdateModel()},_onUpdateModel:function(){this._view.render(this._model.localData)}},nts.view.AutoScrollView=function(){this._cnt=15,this._length=this._cnt,this._observer=new nts.helper.Observer,this._insertTemplate(),this._cacheElements()},nts.view.AutoScrollView.prototype={_insertTemplate:function(){this._listTemplate=_.template($("#autoScrollList").html()),this._bottomTemplate=_.template($("#autoScrollBottom").html()),this._bottomEndTemplate=_.template($("#autoScrollFinish").html())},_cacheElements:function(){this._getMore=$(".cu_pg_w")},_createFrag:function(a){var b,c,d,e=document.createDocumentFragment(),f=this._length;for(c=f-this._cnt;f>c;c+=1)d=a[c],b=this._listTemplate({thumb:d.thumb,playTime:d.playTime,category:d.category,title:d.title,badge:d.badge}),e.appendChild($(b)[0]);return e},_listRender:function(a){var b,c=$(".jr_ct");return a.length<this._length?!1:(b=this._createFrag(a),void c.append(b))},_afterRender:function(){$(".u_pg_lodic").removeClass().addClass("ico_view"),this._length+=this._cnt},_noticeFinishRender:function(){var a;a=this._bottomEndTemplate,this._getMore.html(a)},_removeEvents:function(){this._getMore.off("click"),this._observer.unSubscribe("update")},_bottomRender:function(a){var b;b=this._bottomTemplate({current:this._length.toString(),total:a.length.toString()}),this._getMore.html(b)},render:function(a){var b=a.items,c=this;b.length<=c._length?(c._noticeFinishRender(),c._removeEvents()):c._bottomRender(b),setTimeout(function(){c._listRender(b),c._afterRender()},200)}},nts.helper.Observer=function(){this._eventHandler=$(this)},nts.helper.Observer.prototype={subscribe:function(a,b){this._eventHandler.on(a,b)},unSubscribe:function(a){this._eventHandler.off(a)},publish:function(a){this._eventHandler.trigger(a)}};
//# sourceMappingURL=sourcemap.map